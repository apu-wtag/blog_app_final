<div class="max-w-lg mx-auto mt-10 p-8 border border-gray-200 rounded-lg shadow-sm">
  <h1 class="text-2xl font-bold text-center mb-6">Edit Profile</h1>

  <%= form_with model: @user, class: "space-y-6" do |form| %>
    <% if form.object.errors.any? %>
      <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert">
        <% form.object.errors.full_messages.each do |message| %>
          <div><%= message %></div>
        <% end %>
      </div>
    <% end %>

    <!-- Username -->
    <div data-controller="username-check" data-current-id="<%= @user.id %>">
      <%= form.label :user_name, class: "block text-sm font-medium text-gray-700" %>
      <span class="text-xs text-gray-500">(must be unique)</span>
      <%= form.text_field :user_name,
                          class: "mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",
                          data: { action: "input->username-check#check" } %>
      <div data-username-check-target="feedback" class="mt-1 text-sm"></div>
    </div>

    <!-- Name -->
    <div>
      <%= form.label :name, class: "block text-sm font-medium text-gray-700" %>
      <%= form.text_field :name,
                          class: "mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" %>
    </div>

    <!-- Email -->
    <div>
      <%= form.label :email, class: "block text-sm font-medium text-gray-700" %>
      <%= form.email_field :email,
                           class: "mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" %>
    </div>

    <!-- Bio -->
    <div>
      <%= form.label :bio, class: "block text-sm font-medium text-gray-700" %>
      <%= form.text_area :bio,
                         rows: 4,
                         class: "mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" %>
    </div>

    <!-- Profile Picture -->
    <div>
      <%= form.label :profile_picture, class: "block text-sm font-medium text-gray-700" %>
      <% if @user.profile_picture.attached? %>
        <div class="mb-2">
          <%= image_tag @user.profile_picture, class: "w-16 h-16 rounded-full object-cover" %>
        </div>
      <% end %>
      <%= form.file_field :profile_picture,
                          class: "mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100" %>
    </div>

    <div>
      <%= form.submit "Update Profile", class: "w-full flex justify-center py-2 px-4 rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700" %>
    </div>
  <% end %>
</div>
