<div id="<%= dom_id(article, :clap_button) %>">
  <% if current_user %>
    <%
      clapped = current_user.clapped_articles.include?(article)
      state_classes = clapped ? "text-blue-600" : "text-gray-600"
    %>
    <%= button_to toggle_clap_article_path(article), method: :post, data: { turbo_stream: true }, class: "group flex items-center space-x-2 rounded-md p-2 -ml-2 hover:bg-gray-50 transition-colors duration-150 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 #{state_classes}" do %>
      <span class="text-2xl <%= 'grayscale' unless clapped %>">
        👏
      </span>
      <span class="text-sm font-medium group-hover">
        <%= article.claps_count %> Claps
      </span>
    <% end %>
  <% else %>
    <div class="flex items-center space-x-2 p-2 -ml-2 text-gray-600">
      <span class="text-2xl grayscale">👏</span>
      <span class="text-sm font-medium"><%= article.claps_count %> Claps</span>
    </div>
  <% end %>
</div>